plugins {
  id "java-library"
  id "org.springframework.boot" version "3.1.2"
}

repositories {
  mavenCentral()
  maven {url = "https://repo.spring.io/milestone/"}
}

sourceCompatibility = JavaVersion.VERSION_17
targetCompatibility = JavaVersion.VERSION_17

dependencies {
  compileOnly 'org.projectlombok:lombok:1.18.28'
  annotationProcessor 'org.projectlombok:lombok:1.18.28'

  implementation('org.apache.commons:commons-lang3:3.13.0')

  // using the milestone because of this issue, scheduler tracing problem:
  // https://github.com/spring-projects/spring-boot/pull/35191
  implementation('org.springframework.boot:spring-boot-starter-web:3.2.0-M3')
  implementation("org.springframework.boot:spring-boot-starter-actuator:3.2.0-M3")

  // export open telemetry metrics without open telemetry deps
  // https://github.com/micrometer-metrics/micrometer/pull/3129/files
  implementation('io.micrometer:micrometer-registry-otlp:1.11.5')

  // only needled for tracing (comes with open telemetry deps)
  implementation('io.micrometer:micrometer-tracing:1.1.6')
  implementation('io.micrometer:micrometer-tracing-bridge-otel:1.1.6')
  implementation('io.opentelemetry:opentelemetry-exporter-otlp:1.31.0')

  testCompileOnly 'org.projectlombok:lombok:1.18.28'
  testAnnotationProcessor 'org.projectlombok:lombok:1.18.28'

}

processResources {
  filesMatching('application.properties') {
    expand(project.properties)
  }
}
