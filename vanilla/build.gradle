plugins {
  id "java-library"
  id 'com.github.johnrengelman.shadow' version '8.1.1'
}

repositories {
  mavenLocal()
  mavenCentral()
  maven { url  "https://jitpack.io" }
}

java {
  sourceCompatibility = JavaVersion.VERSION_21
  targetCompatibility = JavaVersion.VERSION_21

}
dependencies {

  compileOnly 'org.projectlombok:lombok:1.18.+'
  annotationProcessor 'org.projectlombok:lombok:1.18.+'

  testCompileOnly 'org.projectlombok:lombok:1.18.+'
  testAnnotationProcessor 'org.projectlombok:lombok:1.18.+'

  implementation 'com.github.mvallim:emv-qrcode:0.1.1'
  implementation "com.fasterxml.uuid:java-uuid-generator:4.0"
  implementation group: 'org.apache.commons', name: 'commons-compress', version: '1.22'
  implementation group: 'org.apache.commons', name: 'commons-csv', version: '1.9.0'
  implementation group: 'ch.qos.logback', name: 'logback-classic', version: '1.4.5'
  implementation 'com.google.guava:guava:31.1-jre'
  implementation 'com.github.philburk:jsyn:v17.1.0'
  implementation("org.apache.commons:commons-collections4:4.5.0")

  testImplementation("org.junit.jupiter:junit-jupiter:5.7.1")
  testImplementation("org.mockito:mockito-junit-jupiter:3.9.0")

}

test {
  useJUnitPlatform()
  testLogging {
    events "passed", "skipped", "failed"
  }
}

def mainClassName = "Batata"

jar {
  manifest {
    attributes(
      "Main-Class": mainClassName
    )
  }
}

shadowJar {
  mergeServiceFiles()
}
