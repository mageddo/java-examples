plugins {
  id "java"
  id "io.quarkus"
}

repositories {
  mavenCentral()
  mavenLocal()
}

dependencies {

  compileOnly("org.projectlombok:lombok:1.18.24")
  annotationProcessor("org.projectlombok:lombok:1.18.24")

//  compileOnly("com.mageddo.nativeimage:reflection-config-generator:2.3.4")
//  annotationProcessor("com.mageddo.nativeimage:reflection-config-generator:2.3.4")

  implementation enforcedPlatform("${quarkusPlatformGroupId}:${quarkusPlatformArtifactId}:${quarkusPlatformVersion}")
  implementation("io.quarkus:quarkus-jdbc-postgresql")
  implementation("net.java.dev.jna:jna")
  implementation("io.quarkus:quarkus-flyway")
  implementation("io.quarkus:quarkus-jackson")
  implementation("io.quarkus:quarkus-resteasy-jackson")
  implementation("io.quarkus:quarkus-smallrye-openapi")
  implementation("io.quarkus:quarkus-scheduler")
  implementation("io.quarkus:quarkus-kafka-client")
  implementation("com.mageddo.javaee-jdbi:javaee-jdbi:0.1.1")
  implementation("org.thymeleaf:thymeleaf:3.0.11.RELEASE")

  implementation platform("org.jdbi:jdbi3-bom:3.13.0")
  implementation("org.jdbi:jdbi3-core")

  implementation("com.mageddo.rapids-kafka-client:rapids-kafka-client:2.0.6")
  implementation ("org.apache.commons:commons-lang3:3.12.0")

  testCompileOnly("org.projectlombok:lombok:1.18.24")
  testAnnotationProcessor("org.projectlombok:lombok:1.18.24")
  testImplementation("io.quarkus:quarkus-junit5")
  testImplementation("io.rest-assured:rest-assured")
  testImplementation("org.mockito:mockito-junit-jupiter:5.0.0")

  testImplementation("io.zonky.test:embedded-postgres:1.2.5")
  testRuntimeOnly enforcedPlatform("io.zonky.test.postgres:embedded-postgres-binaries-bom:12.2.0")

}

group "com.mageddo"
version "1.0.0-SNAPSHOT"

compileJava {
  options.encoding = "UTF-8"
  options.compilerArgs << "-parameters"
}

compileTestJava {
  options.encoding = "UTF-8"
}

java {
  sourceCompatibility = JavaVersion.VERSION_17
  targetCompatibility = JavaVersion.VERSION_17
}

test {
  systemProperty "java.util.logging.manager", "org.jboss.logmanager.LogManager"
}
